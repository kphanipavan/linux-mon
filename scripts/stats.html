<!DOCTYPE html>
<html>

<head>
    <title>WebSocket demo</title>
</head>

<body>
    <script>
        function connect(ws) {
                ws = new WebSocket("ws://192.168.43.59:5678/"),
                    messages = document.createElement('ul');
                ws.onmessage = function (event) {
                    var messages = document.getElementsByTagName('ul')[0],
                        message = document.createElement('li'),
                        content = document.createTextNode(event.data);
                    console.log(JSON.parse(event.data))
                    console.log(typeof (event.data))

                    message.appendChild(content);
                    messages.appendChild(message);
                };
            }
        setTimeout(() => {
            var ws;
            
            connect(ws)
            ws.onerror = function (error) {
                connect(ws)
            }
            document.body.appendChild(messages);
        }, 1000)

    </script>
</body>

</html>